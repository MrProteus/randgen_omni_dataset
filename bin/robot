#! /usr/bin/env python

import rospy
from math import pi
from randgen_omni_dataset import robot

RATE = 33
LOG_LEVEL = rospy.DEBUG

if __name__ == '__main__':

    name = 'OMNI1'
    rospy.init_node(name, log_level=LOG_LEVEL)

    initial_pose = {'x': 0.5,
                    'y': 2.0,
                    'theta': pi/3.0}
    robot = robot.Robot(initial_pose, name)

    rate = rospy.Rate(RATE)

    robot.odometry.change_state('Rotate')
    robot.run(True)
    while not rospy.is_shutdown():

        # Perform one robot loop
        robot.one_loop()

        rospy.logdebug(robot.pose_to_str())

        robot.publish_rviz_gt()

        # Sleep for rest of time
        rate.sleep()
